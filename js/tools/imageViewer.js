export default function imageViewer(){let t=!1,s=1,a=!1,r=0,i=0,o=0,l=0;const n=document.querySelector(".image-viewer-container"),c=n.querySelector("img"),d=e=>{document.body.style.overflow=e?"hidden":"auto",e?n.classList.add("active"):n.classList.remove("active")};let m=0;var e=e=>{a&&e.stopPropagation(),a=!1},e=(c.addEventListener("wheel",e=>{e.preventDefault();var t=c.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top,n=n-t.width/2,a=a-t.height/2,t=s;s+=-.001*e.deltaY,t<(s=Math.min(Math.max(.8,s),4))?(o-=n*(s-t),l-=a*(s-t)):(o=0,l=0),c.style.transform=`translate(${o}px, ${l}px) scale(${s})`},{passive:!1}),c.addEventListener("mousedown",e=>{e.preventDefault(),a=!0,r=e.clientX,i=e.clientY},{passive:!1}),c.addEventListener("mousemove",e=>{var t,n;!a||(t=(new Date).getTime())-m<100||(m=t,t=e.clientX-r,n=e.clientY-i,o+=t,l+=n,r=e.clientX,i=e.clientY,c.style.transform=`translate(${o}px, ${l}px) scale(${s})`)},{passive:!1}),c.addEventListener("mouseup",e,{passive:!1}),c.addEventListener("mouseleave",e,{passive:!1}),n.addEventListener("click",e=>{e.target===e.currentTarget&&(t=!1,d(t),s=1,o=0,l=0,c.style.transform=`translate(${o}px, ${l}px) scale(${s})`)}),document.querySelectorAll(".markdown-body img, .masonry-item img, #shuoshuo-content img"));const v=e=>{"Escape"===e.key&&t&&(t=!1,d(t),s=1,o=0,l=0,c.style.transform=`translate(${o}px, ${l}px) scale(${s})`,document.removeEventListener("keydown",v))};e.forEach(e=>{e.addEventListener("click",()=>{t=!0,d(t),c.src=e.src,document.addEventListener("keydown",v)})}),!e.length&&n&&n.parentNode.removeChild(n)}